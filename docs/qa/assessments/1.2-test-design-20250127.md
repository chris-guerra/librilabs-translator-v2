# Test Design: Story 1.2

Date: 2025-01-27
Designer: Quinn (Test Architect)

## Test Strategy Overview

- **Total test scenarios**: 79
- **Unit tests**: 5 (6%)
- **Integration tests**: 54 (68%)
- **E2E tests**: 20 (25%)
- **Priority distribution**: P0: 27, P1: 32, P2: 18, P3: 2

**Test Strategy Rationale**: This infrastructure-focused story requires extensive integration and E2E testing to verify Docker configuration, service orchestration, and end-to-end workflows. Story includes critical security requirements (non-root users, secret validation, security scanning) which require additional P0 tests. Unit tests are limited to configuration validation. The majority of tests are integration-level to verify Docker builds, service interactions, security configurations, and infrastructure setup.

## Test Scenarios by Acceptance Criteria

### AC1: Dockerfile is created for FastAPI backend with Python 3.14

#### Scenarios

| ID | Level | Priority | Test | Justification | Mitigates Risks |
|---|-------|----------|------|---------------|-----------------|
| 1.2-INT-001 | Integration | P0 | Backend Dockerfile builds successfully with latest stable Python version | Verify Docker image can be built without errors | TECH-001 |
| 1.2-INT-002 | Integration | P0 | Backend Dockerfile uses latest stable Python version base image | Verify correct Python version is specified | TECH-001 |
| 1.2-INT-003 | Integration | P0 | Backend container runs as non-root user | Verify security best practice (non-root execution) | SEC-005 |
| 1.2-INT-004 | Integration | P0 | Backend Dockerfile does not expose secrets in image layers | Verify no secrets are copied into image layers | SEC-004 |
| 1.2-INT-005 | Integration | P1 | Backend Dockerfile installs all dependencies from requirements.txt | Verify all Python packages install correctly | TECH-001 |
| 1.2-INT-006 | Integration | P1 | Backend Dockerfile exposes port 8000 | Verify port configuration is correct | - |
| 1.2-INT-007 | Integration | P1 | Backend application runs correctly as non-root user | Verify application functionality with non-root user | SEC-005 |
| 1.2-INT-008 | Integration | P2 | Backend Dockerfile uses .dockerignore to exclude unnecessary files | Verify build optimization and security | SEC-004 |
| 1.2-INT-009 | Integration | P2 | Backend Dockerfile sets correct working directory (/app) | Verify working directory configuration | - |

---

### AC2: Dockerfile is created for Next.js frontend (or multi-stage build)

#### Scenarios

| ID | Level | Priority | Test | Justification | Mitigates Risks |
|---|-------|----------|------|---------------|-----------------|
| 1.2-INT-010 | Integration | P0 | Frontend Dockerfile builds successfully with Node.js | Verify Docker image can be built without errors | - |
| 1.2-INT-011 | Integration | P0 | Frontend Dockerfile uses Node.js version compatible with Next.js 16.0.4 | Verify Node.js version compatibility | - |
| 1.2-INT-012 | Integration | P0 | Frontend container runs as non-root user | Verify security best practice (non-root execution) | SEC-005 |
| 1.2-INT-013 | Integration | P0 | Frontend Dockerfile does not expose secrets in image layers | Verify no secrets are copied into image layers | SEC-004 |
| 1.2-INT-014 | Integration | P1 | Frontend Dockerfile installs all dependencies from package.json | Verify all npm packages install correctly | - |
| 1.2-INT-015 | Integration | P1 | Frontend Dockerfile exposes port 3000 | Verify port configuration is correct | - |
| 1.2-INT-016 | Integration | P1 | Frontend application runs correctly as non-root user | Verify application functionality with non-root user | SEC-005 |
| 1.2-INT-017 | Integration | P2 | Frontend Dockerfile uses .dockerignore to exclude node_modules and .next | Verify build optimization | PERF-001, SEC-004 |
| 1.2-INT-018 | Integration | P2 | Frontend Dockerfile sets correct working directory (/app) | Verify working directory configuration | - |

---

### AC3: docker-compose.yml is created for local development (backend, frontend, PostgreSQL)

#### Scenarios

| ID | Level | Priority | Test | Justification | Mitigates Risks |
|---|-------|----------|------|---------------|-----------------|
| 1.2-INT-019 | Integration | P0 | docker-compose.yml defines PostgreSQL service with postgres:16 image | Verify database service configuration | - |
| 1.2-INT-020 | Integration | P0 | docker-compose.yml defines backend service with correct build context | Verify backend service configuration | - |
| 1.2-INT-021 | Integration | P0 | docker-compose.yml defines frontend service with correct build context | Verify frontend service configuration | - |
| 1.2-INT-022 | Integration | P0 | All services start successfully together using docker-compose up | Verify service orchestration works | TECH-002 |
| 1.2-INT-023 | Integration | P0 | Backend service waits for PostgreSQL to be ready before starting | Verify service startup sequencing | TECH-002 |
| 1.2-INT-024 | Integration | P0 | Frontend service waits for backend to be ready before starting | Verify service dependency ordering | TECH-002 |
| 1.2-INT-025 | Integration | P1 | PostgreSQL service uses named volume for data persistence | Verify data persistence configuration | DATA-001 |
| 1.2-INT-026 | Integration | P1 | Backend service has correct port mapping (8000:8000) | Verify port mapping configuration | TECH-004 |
| 1.2-INT-027 | Integration | P1 | Frontend service has correct port mapping (3000:3000) | Verify port mapping configuration | TECH-004 |
| 1.2-INT-028 | Integration | P1 | PostgreSQL service has correct port mapping (5432:5432) | Verify port mapping configuration | TECH-004 |

---

### AC4: Makefile is created with standard development commands (build, up, down, logs, clean, etc.)

#### Scenarios

| ID | Level | Priority | Test | Justification | Mitigates Risks |
|---|-------|----------|------|---------------|-----------------|
| 1.2-INT-029 | Integration | P0 | `make build` command builds all Docker images successfully | Verify build command works | OPS-002 |
| 1.2-INT-030 | Integration | P0 | `make up` command starts all services in detached mode | Verify start command works | OPS-002 |
| 1.2-INT-031 | Integration | P0 | `make down` command stops and removes all containers | Verify stop command works | OPS-002 |
| 1.2-INT-032 | Integration | P1 | `make logs` command displays logs from all services | Verify logs command works | OPS-002 |
| 1.2-INT-033 | Integration | P1 | `make logs-backend` command displays only backend logs | Verify filtered logs command works | OPS-002 |
| 1.2-INT-034 | Integration | P1 | `make logs-frontend` command displays only frontend logs | Verify filtered logs command works | OPS-002 |
| 1.2-INT-035 | Integration | P1 | `make logs-db` command displays only database logs | Verify filtered logs command works | OPS-002 |
| 1.2-INT-036 | Integration | P1 | `make clean` command removes containers, volumes, and images | Verify clean command works | OPS-002 |
| 1.2-INT-037 | Integration | P1 | `make restart` command restarts all services | Verify restart command works | OPS-002, OPS-004 |
| 1.2-INT-038 | Integration | P2 | `make ps` command shows running containers | Verify status command works | OPS-002 |
| 1.2-UNIT-001 | Unit | P2 | Makefile commands use correct service names from docker-compose.yml | Verify service name consistency | OPS-002 |

---

### AC5: Makefile supports volume mounting for development mode (hot-reload for both frontend and backend)

#### Scenarios

| ID | Level | Priority | Test | Justification | Mitigates Risks |
|---|-------|----------|------|---------------|-----------------|
| 1.2-INT-039 | Integration | P0 | `make up-dev` command starts services with volume mounting | Verify development mode command works | - |
| 1.2-INT-040 | Integration | P0 | Backend hot-reload works when source code is modified | Verify backend volume mounting enables hot-reload | TECH-003 |
| 1.2-INT-041 | Integration | P0 | Frontend hot-reload works when source code is modified | Verify frontend volume mounting enables hot-reload | TECH-003 |
| 1.2-INT-042 | Integration | P1 | Backend volume mount excludes unnecessary files (e.g., __pycache__) | Verify volume mount optimization | PERF-002 |
| 1.2-INT-043 | Integration | P1 | Frontend volume mount excludes node_modules and .next directories | Verify volume mount optimization | PERF-002 |

---

### AC6: Docker images use intuitive names (e.g., `librilabs-translator-backend`, `librilabs-translator-frontend`)

#### Scenarios

| ID | Level | Priority | Test | Justification | Mitigates Risks |
|---|-------|----------|------|---------------|-----------------|
| 1.2-UNIT-002 | Unit | P1 | Backend service name is `librilabs-translator-backend` in docker-compose.yml | Verify service naming convention | - |
| 1.2-UNIT-003 | Unit | P1 | Frontend service name is `librilabs-translator-frontend` in docker-compose.yml | Verify service naming convention | - |

---

### AC7: Environment variables are properly configured via .env files

#### Scenarios

| ID | Level | Priority | Test | Justification | Mitigates Risks |
|---|-------|----------|------|---------------|-----------------|
| 1.2-INT-044 | Integration | P0 | .env.example file exists with all required environment variables | Verify environment variable template | SEC-001, SEC-002 |
| 1.2-INT-045 | Integration | P0 | docker-compose.yml uses environment variable substitution (${VAR}) | Verify environment variable configuration | SEC-001 |
| 1.2-INT-046 | Integration | P0 | Services start successfully with environment variables from .env file | Verify environment variable loading | OPS-003 |
| 1.2-INT-047 | Integration | P1 | .env file is in .gitignore (not tracked by version control) | Verify .env file security | SEC-003 |
| 1.2-INT-048 | Integration | P1 | Backend receives OPENAI_API_KEY from environment variable | Verify API key configuration | SEC-002 |
| 1.2-INT-049 | Integration | P1 | Backend receives DATABASE_URL from environment variable | Verify database connection string | SEC-001 |
| 1.2-INT-050 | Integration | P1 | Frontend receives NEXT_PUBLIC_API_URL from environment variable | Verify API URL configuration | - |
| 1.2-INT-051 | Integration | P2 | Application fails gracefully with clear error when required environment variables are missing | Verify error handling | OPS-003 |

---

### AC8: Docker containers can be built and run locally using Makefile commands

#### Scenarios

| ID | Level | Priority | Test | Justification | Mitigates Risks |
|---|-------|----------|------|---------------|-----------------|
| 1.2-E2E-001 | E2E | P0 | Complete workflow: `make build` → `make up-dev` → services running | Verify end-to-end build and start workflow | - |
| 1.2-E2E-002 | E2E | P0 | Complete workflow: `make down` → all services stopped | Verify end-to-end stop workflow | - |
| 1.2-E2E-003 | E2E | P1 | Complete workflow: `make clean` → all resources removed | Verify end-to-end cleanup workflow | - |

---

### AC9: Application runs successfully in Docker containers

#### Scenarios

| ID | Level | Priority | Test | Justification | Mitigates Risks |
|---|-------|----------|------|---------------|-----------------|
| 1.2-E2E-004 | E2E | P0 | Backend container starts and runs without errors | Verify backend container execution | TECH-001 |
| 1.2-E2E-005 | E2E | P0 | Frontend container starts and runs without errors | Verify frontend container execution | - |
| 1.2-E2E-006 | E2E | P0 | PostgreSQL container starts and runs without errors | Verify database container execution | - |
| 1.2-E2E-007 | E2E | P0 | Docker image security scanning identifies vulnerabilities (docker scout) | Verify security scanning process | SEC-006 |
| 1.2-E2E-008 | E2E | P0 | No secrets are exposed in Docker image layers (inspect image history) | Verify secret validation | SEC-004 |
| 1.2-E2E-009 | E2E | P1 | All containers remain running and stable for extended period (5+ minutes) | Verify container stability | - |
| 1.2-E2E-010 | E2E | P1 | Containers restart successfully after `make restart` command | Verify container restart capability | OPS-004 |
| 1.2-E2E-011 | E2E | P1 | Containers recover gracefully from unexpected termination (kill/restart) | Verify container recovery | OPS-004 |
| 1.2-E2E-012 | E2E | P1 | Application state is preserved or recoverable after container restart | Verify state recovery | OPS-004 |
| 1.2-E2E-013 | E2E | P1 | Database connections are re-established after container restart | Verify connection recovery | OPS-004 |

---

### AC10: Backend health check endpoint works from containerized backend

#### Scenarios

| ID | Level | Priority | Test | Justification | Mitigates Risks |
|---|-------|----------|------|---------------|-----------------|
| 1.2-E2E-014 | E2E | P0 | Backend health check endpoint responds from host: `curl http://localhost:8000/health` | Verify health check accessibility from host | - |
| 1.2-INT-052 | Integration | P0 | Backend health check endpoint responds from within backend container | Verify health check works inside container | - |
| 1.2-E2E-015 | E2E | P1 | Backend health check returns correct status (200 OK) | Verify health check response format | - |
| 1.2-INT-053 | Integration | P1 | Backend health check endpoint works after container restart | Verify health check reliability | OPS-004 |

---

### AC11: Frontend can communicate with backend API from containers

#### Scenarios

| ID | Level | Priority | Test | Justification | Mitigates Risks |
|---|-------|----------|------|---------------|-----------------|
| 1.2-E2E-016 | E2E | P0 | Frontend is accessible at http://localhost:3000 | Verify frontend accessibility | - |
| 1.2-E2E-017 | E2E | P0 | Frontend can make HTTP requests to backend API | Verify frontend-backend communication | - |
| 1.2-E2E-018 | E2E | P1 | Frontend displays content correctly when backend API responds | Verify frontend-backend integration | - |
| 1.2-INT-054 | Integration | P1 | Database connection from backend container works correctly | Verify database connectivity | DATA-001 |
| 1.2-E2E-019 | E2E | P2 | Complete user journey: Frontend → Backend → Database works end-to-end | Verify full stack integration | - |

---

### AC12: Development workflow is documented (using Makefile commands)

#### Scenarios

| ID | Level | Priority | Test | Justification | Mitigates Risks |
|---|-------|----------|------|---------------|-----------------|
| 1.2-E2E-020 | E2E | P1 | New developer can follow README to set up Docker environment successfully | Verify documentation completeness | OPS-001 |
| 1.2-UNIT-004 | Unit | P2 | README.md contains all Makefile commands with descriptions | Verify documentation coverage | OPS-001 |
| 1.2-UNIT-005 | Unit | P3 | README.md includes troubleshooting section for common Docker issues | Verify troubleshooting documentation | OPS-001 |

---

## Risk Coverage

### High Priority Risks (P0 Tests)

**SEC-004: Secrets Exposed in Docker Image Layers**
- Covered by: 1.2-INT-004, 1.2-INT-013, 1.2-E2E-008
- Tests verify no secrets are copied into image layers and validate secret management

**SEC-001: Hardcoded Database Credentials**
- Covered by: 1.2-INT-044, 1.2-INT-045, 1.2-INT-049
- Tests verify environment variable substitution and .env file usage

**TECH-002: Service Startup Race Conditions**
- Covered by: 1.2-INT-022, 1.2-INT-023, 1.2-INT-024
- Tests verify service dependency ordering and startup sequencing

**SEC-005: Running Containers as Root User**
- Covered by: 1.2-INT-003, 1.2-INT-007, 1.2-INT-012, 1.2-INT-016
- Tests verify containers run as non-root user and application works correctly

**SEC-006: Docker Image Security Vulnerabilities**
- Covered by: 1.2-E2E-007
- Tests verify security scanning process identifies vulnerabilities

**TECH-001: Python Version Compatibility**
- Covered by: 1.2-INT-001, 1.2-INT-002, 1.2-E2E-004
- Tests verify Docker build and runtime with latest stable Python version

### Medium Priority Risks (P1 Tests)

**OPS-004: Container Recovery and Resilience Failures**
- Covered by: 1.2-E2E-010, 1.2-E2E-011, 1.2-E2E-012, 1.2-E2E-013, 1.2-INT-037, 1.2-INT-053
- Tests verify container restart, recovery, state preservation, and connection re-establishment

**SEC-002: Environment Variable Exposure**
- Covered by: 1.2-INT-047, 1.2-INT-048
- Tests verify .env file security and environment variable handling

**OPS-001: Documentation Gaps**
- Covered by: 1.2-E2E-020, 1.2-UNIT-004
- Tests verify documentation completeness and usability

**OPS-002: Makefile Command Errors**
- Covered by: 1.2-INT-029 through 1.2-INT-038, 1.2-UNIT-001
- Tests verify all Makefile commands work correctly

**TECH-003: Volume Mounting Performance**
- Covered by: 1.2-INT-040, 1.2-INT-041
- Tests verify hot-reload functionality works

**DATA-001: Database Volume Persistence**
- Covered by: 1.2-INT-025, 1.2-INT-054
- Tests verify volume configuration and database connectivity

**OPS-003: Environment Variable Misconfiguration**
- Covered by: 1.2-INT-046, 1.2-INT-051
- Tests verify environment variable loading and error handling

**TECH-004: Port Conflicts**
- Covered by: 1.2-INT-026, 1.2-INT-027, 1.2-INT-028
- Tests verify port mapping configuration

### Low Priority Risks (P2/P3 Tests)

**PERF-001: Large Docker Image Sizes**
- Covered by: 1.2-INT-008, 1.2-INT-017
- Tests verify .dockerignore configuration

**PERF-002: Volume Mount Performance Impact**
- Covered by: 1.2-INT-036, 1.2-INT-037
- Tests verify volume mount optimization

**SEC-003: .env File Git Tracking Risk**
- Covered by: 1.2-INT-047
- Test verifies .env is in .gitignore

---

## Recommended Execution Order

### Phase 1: Critical Infrastructure Tests (P0 - Fail Fast)

1. **Build Verification and Security** (9 tests)
   - 1.2-INT-001: Backend Dockerfile builds successfully
   - 1.2-INT-002: Backend Dockerfile uses latest stable Python version
   - 1.2-INT-003: Backend container runs as non-root user
   - 1.2-INT-004: Backend Dockerfile does not expose secrets in image layers
   - 1.2-INT-010: Frontend Dockerfile builds successfully
   - 1.2-INT-011: Frontend Dockerfile uses correct Node.js version
   - 1.2-INT-012: Frontend container runs as non-root user
   - 1.2-INT-013: Frontend Dockerfile does not expose secrets in image layers
   - 1.2-INT-029: `make build` command works

2. **Service Configuration** (6 tests)
   - 1.2-INT-019: PostgreSQL service defined
   - 1.2-INT-020: Backend service defined
   - 1.2-INT-021: Frontend service defined
   - 1.2-INT-022: All services start together
   - 1.2-INT-023: Backend waits for PostgreSQL
   - 1.2-INT-024: Frontend waits for backend

3. **Environment Variables** (3 tests)
   - 1.2-INT-044: .env.example exists
   - 1.2-INT-045: docker-compose.yml uses env substitution
   - 1.2-INT-046: Services start with .env variables

4. **End-to-End Workflow and Security Scanning** (5 tests)
   - 1.2-E2E-001: Complete build and start workflow
   - 1.2-E2E-002: Complete stop workflow
   - 1.2-E2E-004: Backend container runs successfully
   - 1.2-E2E-007: Docker image security scanning identifies vulnerabilities
   - 1.2-E2E-008: No secrets are exposed in Docker image layers

5. **Health Checks** (2 tests)
   - 1.2-E2E-014: Health check from host
   - 1.2-INT-052: Health check from container

6. **Frontend-Backend Communication** (2 tests)
   - 1.2-E2E-016: Frontend accessible
   - 1.2-E2E-017: Frontend can communicate with backend

**Total P0 Tests: 27 tests**

### Phase 2: Core Functionality Tests (P1)

1. **Makefile Commands** (9 tests)
   - 1.2-INT-032 through 1.2-INT-038, 1.2-UNIT-001

2. **Hot-Reload Functionality** (3 tests)
   - 1.2-INT-039: `make up-dev` works
   - 1.2-INT-040: Backend hot-reload works
   - 1.2-INT-041: Frontend hot-reload works

3. **Environment Variable Details** (4 tests)
   - 1.2-INT-047, 1.2-INT-048, 1.2-INT-049, 1.2-INT-050

4. **Container Stability and Recovery** (6 tests)
   - 1.2-E2E-005: Frontend container runs successfully
   - 1.2-E2E-006: PostgreSQL container runs successfully
   - 1.2-E2E-009: All containers remain stable
   - 1.2-E2E-010: Containers restart successfully
   - 1.2-E2E-011: Containers recover from unexpected termination
   - 1.2-E2E-012: Application state is preserved after restart

5. **Health Check Details** (2 tests)
   - 1.2-E2E-015: Health check returns correct status
   - 1.2-INT-053: Health check works after restart

6. **Integration Details** (4 tests)
   - 1.2-E2E-013: Database connections re-established after restart
   - 1.2-E2E-018: Frontend displays content correctly
   - 1.2-INT-054: Database connection works
   - 1.2-E2E-020: New developer can follow README

7. **Service Naming** (2 tests)
   - 1.2-UNIT-002, 1.2-UNIT-003

8. **Non-Root User Functionality** (2 tests)
   - 1.2-INT-007: Backend application runs correctly as non-root
   - 1.2-INT-016: Frontend application runs correctly as non-root

**Total P1 Tests: 32 tests**

### Phase 3: Secondary Tests (P2)

1. **Optimization Tests** (4 tests)
   - 1.2-INT-008, 1.2-INT-009, 1.2-INT-017, 1.2-INT-018

2. **Volume Mount Optimization** (2 tests)
   - 1.2-INT-042, 1.2-INT-043

3. **Error Handling** (1 test)
   - 1.2-INT-051: Application fails gracefully with missing env vars

4. **Documentation** (1 test)
   - 1.2-UNIT-004: README contains all Makefile commands

5. **End-to-End Integration** (1 test)
   - 1.2-E2E-019: Complete user journey works end-to-end

**Total P2 Tests: 18 tests**

### Phase 4: Nice-to-Have Tests (P3)

1. **Documentation Polish** (1 test)
   - 1.2-UNIT-005

**Total P3 Tests: 1 test**

---

## Test Implementation Notes

### Integration Test Setup

**Docker Test Environment:**
- Use Docker-in-Docker or test containers for isolated testing
- Clean up containers and volumes after each test
- Use test-specific docker-compose files when needed
- Mock external services (e.g., OpenAI API) for reliability

**Test Data:**
- Use minimal test data for database operations
- Clean database state between tests
- Use test-specific environment variables

### E2E Test Setup

**Full Stack Environment:**
- Start all services using `make up-dev`
- Wait for health checks before running tests
- Clean up all resources after test suite
- Use realistic but minimal test data

**Test Execution:**
- Run E2E tests in CI/CD pipeline
- Consider parallel execution for independent tests
- Set appropriate timeouts for service startup

### Unit Test Setup

**Configuration Validation:**
- Parse and validate YAML/configuration files
- Verify service names and port mappings
- Check environment variable references

**Test Tools:**
- Use YAML parsers for docker-compose.yml validation
- Use regex or string matching for Makefile validation
- Use file system checks for .env.example validation

---

## Coverage Gaps

**No coverage gaps identified** - All 12 acceptance criteria have test coverage.

**Note on AC12 (Documentation)**: Documentation quality is verified through E2E test (1.2-E2E-020) where a new developer follows the documentation. Additional unit tests verify documentation structure and completeness.

---

## Test Maintenance Considerations

### Stable Tests (Low Maintenance)
- Unit tests for configuration validation (1.2-UNIT-001 through 1.2-UNIT-005)
- Integration tests for Docker build verification (1.2-INT-001, 1.2-INT-010)
- Integration tests for service configuration (1.2-INT-019 through 1.2-INT-021)
- Security tests for non-root user verification (1.2-INT-003, 1.2-INT-012)

### Brittle Tests (Higher Maintenance)
- E2E tests for complete workflows (1.2-E2E-001, 1.2-E2E-002) - May need updates if Makefile commands change
- Integration tests for hot-reload (1.2-INT-040, 1.2-INT-041) - May be affected by file system performance
- E2E tests for frontend-backend communication (1.2-E2E-017, 1.2-E2E-018) - May need updates as application evolves
- Security scanning tests (1.2-E2E-007) - May need updates as vulnerability databases change
- Container recovery tests (1.2-E2E-010, 1.2-E2E-011, 1.2-E2E-012) - May need updates as application resilience improves

### Test Data Management
- Use test-specific environment variables
- Clean up Docker resources after each test run
- Use test containers or Docker-in-Docker for isolation
- Consider test-specific docker-compose files for complex scenarios

---

## Quality Checklist

- [x] Every AC has test coverage
- [x] Test levels are appropriate (not over-testing)
- [x] No duplicate coverage across levels
- [x] Priorities align with business risk
- [x] Test IDs follow naming convention (1.2-{LEVEL}-{SEQ})
- [x] Scenarios are atomic and independent
- [x] Risk mitigations are addressed
- [x] Test execution order is logical

---

---

## Gate YAML Block

```yaml
# test_design (paste into gate file):
test_design:
  scenarios_total: 79
  by_level:
    unit: 5
    integration: 54
    e2e: 20
  by_priority:
    p0: 27
    p1: 32
    p2: 18
    p3: 2
  coverage_gaps: []
```

## Trace References

```
Test design matrix: docs/qa/assessments/1.2-test-design-20250127.md
P0 tests identified: 27
```

---

**Test Design Complete**

